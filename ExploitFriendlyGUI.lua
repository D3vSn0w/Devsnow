-- Combined Voting System + Player List UI
-- Features: Toggle button, Landscape UI, Smooth dragging, Persists on death/reset

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "CombinedExploitGUI"
screenGui.ResetOnSpawn = false
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
screenGui.IgnoreGuiInset = true

-- Use CoreGui for better protection and persistence
if syn and syn.protect_gui then
    syn.protect_gui(screenGui)
    screenGui.Parent = CoreGui
elseif gethui then
    screenGui.Parent = gethui()
else
    screenGui.Parent = player:WaitForChild("PlayerGui")
end

-- ========================================
-- TOGGLE BUTTON
-- ========================================
local toggleButton = Instance.new("TextButton")
toggleButton.Name = "ToggleButton"
toggleButton.Size = UDim2.new(0, 50, 0, 50)
toggleButton.Position = UDim2.new(0, 10, 0.5, -25)
toggleButton.BackgroundColor3 = Color3.fromRGB(25, 25, 32)
toggleButton.BorderSizePixel = 0
toggleButton.Text = "+"
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.TextSize = 28
toggleButton.Font = Enum.Font.GothamBold
toggleButton.AutoButtonColor = false
toggleButton.Parent = screenGui

local toggleCorner = Instance.new("UICorner")
toggleCorner.CornerRadius = UDim.new(0, 12)
toggleCorner.Parent = toggleButton

local toggleStroke = Instance.new("UIStroke")
toggleStroke.Color = Color3.fromRGB(100, 100, 255)
toggleStroke.Thickness = 2
toggleStroke.Transparency = 0.5
toggleStroke.Parent = toggleButton

-- Smooth dragging for toggle button
local toggleDragging = false
local toggleDragStart = nil
local toggleStartPos = nil

toggleButton.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        toggleDragging = true
        toggleDragStart = input.Position
        toggleStartPos = toggleButton.Position
    end
end)

toggleButton.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        toggleDragging = false
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if toggleDragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
        local delta = input.Position - toggleDragStart
        toggleButton.Position = UDim2.new(
            toggleStartPos.X.Scale,
            toggleStartPos.X.Offset + delta.X,
            toggleStartPos.Y.Scale,
            toggleStartPos.Y.Offset + delta.Y
        )
    end
end)

-- Toggle button hover effect
toggleButton.MouseEnter:Connect(function()
    TweenService:Create(toggleButton, TweenInfo.new(0.2), {
        BackgroundColor3 = Color3.fromRGB(35, 35, 42),
        Size = UDim2.new(0, 55, 0, 55)
    }):Play()
    TweenService:Create(toggleStroke, TweenInfo.new(0.2), {Transparency = 0}):Play()
end)

toggleButton.MouseLeave:Connect(function()
    TweenService:Create(toggleButton, TweenInfo.new(0.2), {
        BackgroundColor3 = Color3.fromRGB(25, 25, 32),
        Size = UDim2.new(0, 50, 0, 50)
    }):Play()
    TweenService:Create(toggleStroke, TweenInfo.new(0.2), {Transparency = 0.5}):Play()
end)

-- ========================================
-- MAIN FRAME (LANDSCAPE)
-- ========================================
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 700, 0, 400)
mainFrame.Position = UDim2.new(0.5, -350, 0.5, -200)
mainFrame.BackgroundColor3 = Color3.fromRGB(18, 18, 23)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Visible = false
mainFrame.ClipsDescendants = true
mainFrame.Parent = screenGui

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 12)
mainCorner.Parent = mainFrame

local mainStroke = Instance.new("UIStroke")
mainStroke.Color = Color3.fromRGB(60, 60, 80)
mainStroke.Thickness = 1
mainStroke.Transparency = 0.5
mainStroke.Parent = mainFrame

-- Smooth dragging for main frame
local dragging = false
local dragInput = nil
local dragStart = nil
local startPos = nil

local function updateDrag(input)
    local delta = input.Position - dragStart
    local newPosition = UDim2.new(
        startPos.X.Scale,
        startPos.X.Offset + delta.X,
        startPos.Y.Scale,
        startPos.Y.Offset + delta.Y
    )
    
    TweenService:Create(mainFrame, TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        Position = newPosition
    }):Play()
end

-- ========================================
-- TITLE BAR
-- ========================================
local titleBar = Instance.new("Frame")
titleBar.Name = "TitleBar"
titleBar.Size = UDim2.new(1, 0, 0, 45)
titleBar.BackgroundColor3 = Color3.fromRGB(25, 25, 32)
titleBar.BorderSizePixel = 0
titleBar.Parent = mainFrame

local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 12)
titleCorner.Parent = titleBar

local titleFix = Instance.new("Frame")
titleFix.Size = UDim2.new(1, 0, 0, 12)
titleFix.Position = UDim2.new(0, 0, 1, -12)
titleFix.BackgroundColor3 = Color3.fromRGB(25, 25, 32)
titleFix.BorderSizePixel = 0
titleFix.Parent = titleBar

-- Dragging events on title bar
titleBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

titleBar.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        updateDrag(input)
    end
end)

-- Title Text
local titleText = Instance.new("TextLabel")
titleText.Size = UDim2.new(0, 300, 1, 0)
titleText.Position = UDim2.new(0, 15, 0, 0)
titleText.BackgroundTransparency = 1
titleText.Text = "Friendly Exploit GUI"
titleText.TextColor3 = Color3.fromRGB(255, 255, 255)
titleText.TextSize = 18
titleText.Font = Enum.Font.GothamBold
titleText.TextXAlignment = Enum.TextXAlignment.Left
titleText.Parent = titleBar

-- Player Count
local playerCount = Instance.new("TextLabel")
playerCount.Size = UDim2.new(0, 100, 1, 0)
playerCount.Position = UDim2.new(1, -150, 0, 0)
playerCount.BackgroundTransparency = 1
playerCount.Text = "Players: 0"
playerCount.TextColor3 = Color3.fromRGB(100, 255, 100)
playerCount.TextSize = 14
playerCount.Font = Enum.Font.GothamBold
playerCount.Parent = titleBar

-- Close Button
local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 35, 0, 35)
closeButton.Position = UDim2.new(1, -42, 0.5, -17.5)
closeButton.BackgroundColor3 = Color3.fromRGB(35, 35, 42)
closeButton.BorderSizePixel = 0
closeButton.Text = "‚úï"
closeButton.TextColor3 = Color3.fromRGB(255, 100, 100)
closeButton.TextSize = 18
closeButton.Font = Enum.Font.GothamBold
closeButton.AutoButtonColor = false
closeButton.Parent = titleBar

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(0, 8)
closeCorner.Parent = closeButton

closeButton.MouseEnter:Connect(function()
    TweenService:Create(closeButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(255, 50, 50)}):Play()
end)

closeButton.MouseLeave:Connect(function()
    TweenService:Create(closeButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(35, 35, 42)}):Play()
end)

-- ========================================
-- CONTENT AREA (THREE PANELS)
-- ========================================
local contentFrame = Instance.new("Frame")
contentFrame.Size = UDim2.new(1, -20, 1, -60)
contentFrame.Position = UDim2.new(0, 10, 0, 50)
contentFrame.BackgroundTransparency = 1
contentFrame.Parent = mainFrame

-- Left Panel - Player List (30%)
local leftPanel = Instance.new("Frame")
leftPanel.Size = UDim2.new(0.3, -5, 1, 0)
leftPanel.Position = UDim2.new(0, 0, 0, 0)
leftPanel.BackgroundColor3 = Color3.fromRGB(22, 22, 28)
leftPanel.BorderSizePixel = 0
leftPanel.Parent = contentFrame

local leftCorner = Instance.new("UICorner")
leftCorner.CornerRadius = UDim.new(0, 10)
leftCorner.Parent = leftPanel

-- Left Panel Header
local leftHeader = Instance.new("TextLabel")
leftHeader.Size = UDim2.new(1, -10, 0, 30)
leftHeader.Position = UDim2.new(0, 5, 0, 5)
leftHeader.BackgroundTransparency = 1
leftHeader.Text = "üìã Player List"
leftHeader.TextColor3 = Color3.fromRGB(200, 200, 255)
leftHeader.TextSize = 14
leftHeader.Font = Enum.Font.GothamBold
leftHeader.TextXAlignment = Enum.TextXAlignment.Left
leftHeader.Parent = leftPanel

-- Scrolling Frame for Players
local scrollFrame = Instance.new("ScrollingFrame")
scrollFrame.Name = "ScrollFrame"
scrollFrame.Size = UDim2.new(1, -10, 1, -40)
scrollFrame.Position = UDim2.new(0, 5, 0, 35)
scrollFrame.BackgroundTransparency = 1
scrollFrame.BorderSizePixel = 0
scrollFrame.ScrollBarThickness = 4
scrollFrame.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 255)
scrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
scrollFrame.Parent = leftPanel

local listLayout = Instance.new("UIListLayout")
listLayout.SortOrder = Enum.SortOrder.Name
listLayout.Padding = UDim.new(0, 4)
listLayout.Parent = scrollFrame

listLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
    scrollFrame.CanvasSize = UDim2.new(0, 0, 0, listLayout.AbsoluteContentSize.Y + 5)
end)

-- Middle Panel - Voting System (40%)
local middlePanel = Instance.new("Frame")
middlePanel.Size = UDim2.new(0.4, -5, 1, 0)
middlePanel.Position = UDim2.new(0.3, 5, 0, 0)
middlePanel.BackgroundColor3 = Color3.fromRGB(22, 22, 28)
middlePanel.BorderSizePixel = 0
middlePanel.Parent = contentFrame

local middleCorner = Instance.new("UICorner")
middleCorner.CornerRadius = UDim.new(0, 10)
middleCorner.Parent = middlePanel

-- Middle Panel Header
local middleHeader = Instance.new("TextLabel")
middleHeader.Size = UDim2.new(1, -10, 0, 30)
middleHeader.Position = UDim2.new(0, 5, 0, 5)
middleHeader.BackgroundTransparency = 1
middleHeader.Text = "üó≥Ô∏è Voting System"
middleHeader.TextColor3 = Color3.fromRGB(200, 200, 255)
middleHeader.TextSize = 14
middleHeader.Font = Enum.Font.GothamBold
middleHeader.TextXAlignment = Enum.TextXAlignment.Left
middleHeader.Parent = middlePanel

-- Voting Content
local votingContent = Instance.new("Frame")
votingContent.Size = UDim2.new(1, -20, 1, -45)
votingContent.Position = UDim2.new(0, 10, 0, 40)
votingContent.BackgroundTransparency = 1
votingContent.Parent = middlePanel

-- Player ID Label
local idLabel = Instance.new("TextLabel")
idLabel.Size = UDim2.new(1, 0, 0, 25)
idLabel.Position = UDim2.new(0, 0, 0, 10)
idLabel.BackgroundTransparency = 1
idLabel.Text = "Player ID:"
idLabel.Font = Enum.Font.Gotham
idLabel.TextSize = 14
idLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
idLabel.TextXAlignment = Enum.TextXAlignment.Left
idLabel.Parent = votingContent

-- Player ID Input Box
local idInput = Instance.new("TextBox")
idInput.Size = UDim2.new(1, 0, 0, 40)
idInput.Position = UDim2.new(0, 0, 0, 40)
idInput.BackgroundColor3 = Color3.fromRGB(30, 30, 38)
idInput.Text = ""
idInput.PlaceholderText = "Enter Player ID"
idInput.Font = Enum.Font.Gotham
idInput.TextSize = 14
idInput.TextColor3 = Color3.fromRGB(255, 255, 255)
idInput.PlaceholderColor3 = Color3.fromRGB(120, 120, 130)
idInput.ClearTextOnFocus = false
idInput.BorderSizePixel = 0
idInput.Parent = votingContent

local inputCorner = Instance.new("UICorner")
inputCorner.CornerRadius = UDim.new(0, 8)
inputCorner.Parent = idInput

local inputPadding = Instance.new("UIPadding")
inputPadding.PaddingLeft = UDim.new(0, 10)
inputPadding.PaddingRight = UDim.new(0, 10)
inputPadding.Parent = idInput

-- Vote Type Label
local voteLabel = Instance.new("TextLabel")
voteLabel.Size = UDim2.new(1, 0, 0, 25)
voteLabel.Position = UDim2.new(0, 0, 0, 95)
voteLabel.BackgroundTransparency = 1
voteLabel.Text = "Vote Type:"
voteLabel.Font = Enum.Font.Gotham
voteLabel.TextSize = 14
voteLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
voteLabel.TextXAlignment = Enum.TextXAlignment.Left
voteLabel.Parent = votingContent

-- Like Button
local likeButton = Instance.new("TextButton")
likeButton.Size = UDim2.new(0.48, 0, 0, 45)
likeButton.Position = UDim2.new(0, 0, 0, 125)
likeButton.BackgroundColor3 = Color3.fromRGB(70, 180, 100)
likeButton.Text = "üëç Like"
likeButton.Font = Enum.Font.GothamBold
likeButton.TextSize = 16
likeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
likeButton.BorderSizePixel = 0
likeButton.AutoButtonColor = false
likeButton.Parent = votingContent

local likeCorner = Instance.new("UICorner")
likeCorner.CornerRadius = UDim.new(0, 8)
likeCorner.Parent = likeButton

-- Dislike Button
local dislikeButton = Instance.new("TextButton")
dislikeButton.Size = UDim2.new(0.48, 0, 0, 45)
dislikeButton.Position = UDim2.new(0.52, 0, 0, 125)
dislikeButton.BackgroundColor3 = Color3.fromRGB(220, 70, 70)
dislikeButton.Text = "üëé Dislike"
dislikeButton.Font = Enum.Font.GothamBold
dislikeButton.TextSize = 16
dislikeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
dislikeButton.BorderSizePixel = 0
dislikeButton.AutoButtonColor = false
dislikeButton.Parent = votingContent

local dislikeCorner = Instance.new("UICorner")
dislikeCorner.CornerRadius = UDim.new(0, 8)
dislikeCorner.Parent = dislikeButton

-- Status Label
local statusLabel = Instance.new("TextLabel")
statusLabel.Size = UDim2.new(1, 0, 0, 60)
statusLabel.Position = UDim2.new(0, 0, 0, 180)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = ""
statusLabel.Font = Enum.Font.Gotham
statusLabel.TextSize = 13
statusLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
statusLabel.TextXAlignment = Enum.TextXAlignment.Center
statusLabel.TextYAlignment = Enum.TextYAlignment.Top
statusLabel.TextWrapped = true
statusLabel.Parent = votingContent

-- Right Panel - Info (30%)
local rightPanel = Instance.new("Frame")
rightPanel.Size = UDim2.new(0.3, -5, 1, 0)
rightPanel.Position = UDim2.new(0.7, 5, 0, 0)
rightPanel.BackgroundColor3 = Color3.fromRGB(22, 22, 28)
rightPanel.BorderSizePixel = 0
rightPanel.Parent = contentFrame

local rightCorner = Instance.new("UICorner")
rightCorner.CornerRadius = UDim.new(0, 10)
rightCorner.Parent = rightPanel

-- Right Panel Header
local rightHeader = Instance.new("TextLabel")
rightHeader.Size = UDim2.new(1, -10, 0, 30)
rightHeader.Position = UDim2.new(0, 5, 0, 5)
rightHeader.BackgroundTransparency = 1
rightHeader.Text = "‚ÑπÔ∏è Information"
rightHeader.TextColor3 = Color3.fromRGB(200, 200, 255)
rightHeader.TextSize = 14
rightHeader.Font = Enum.Font.GothamBold
rightHeader.TextXAlignment = Enum.TextXAlignment.Left
rightHeader.Parent = rightPanel

-- Info content
local infoLabel = Instance.new("TextLabel")
infoLabel.Size = UDim2.new(1, -20, 1, -45)
infoLabel.Position = UDim2.new(0, 10, 0, 40)
infoLabel.BackgroundTransparency = 1
infoLabel.Text = "üìã Click to copy IDs\n\nüó≥Ô∏è Enter Player ID to vote\n\n‚ú® Join notifications appear automatically\n\nüéØ Drag UI or button\n\nüíæ Persists on death"
infoLabel.TextColor3 = Color3.fromRGB(180, 180, 200)
infoLabel.TextSize = 12
infoLabel.Font = Enum.Font.Gotham
infoLabel.TextXAlignment = Enum.TextXAlignment.Left
infoLabel.TextYAlignment = Enum.TextYAlignment.Top
infoLabel.TextWrapped = true
infoLabel.Parent = rightPanel

-- ========================================
-- NOTIFICATION CONTAINER
-- ========================================
local notifContainer = Instance.new("Frame")
notifContainer.Name = "NotificationContainer"
notifContainer.Size = UDim2.new(0, 320, 1, -20)
notifContainer.Position = UDim2.new(1, -330, 0, 10)
notifContainer.BackgroundTransparency = 1
notifContainer.Parent = screenGui

local notifLayout = Instance.new("UIListLayout")
notifLayout.SortOrder = Enum.SortOrder.LayoutOrder
notifLayout.Padding = UDim.new(0, 10)
notifLayout.VerticalAlignment = Enum.VerticalAlignment.Top
notifLayout.Parent = notifContainer

-- ========================================
-- FUNCTIONS
-- ========================================

-- Copy to Clipboard Function
local function copyToClipboard(text)
    if setclipboard then
        setclipboard(text)
        return true
    elseif toclipboard then
        toclipboard(text)
        return true
    else
        return false
    end
end

-- Create Player Entry
local function createPlayerEntry(targetPlayer)
    local entry = Instance.new("Frame")
    entry.Name = targetPlayer.Name
    entry.Size = UDim2.new(1, -5, 0, 50)
    entry.BackgroundColor3 = Color3.fromRGB(28, 28, 35)
    entry.BorderSizePixel = 0
    
    local entryCorner = Instance.new("UICorner")
    entryCorner.CornerRadius = UDim.new(0, 8)
    entryCorner.Parent = entry
    
    -- Player Name
    local nameLabel = Instance.new("TextLabel")
    nameLabel.Size = UDim2.new(1, -50, 0, 22)
    nameLabel.Position = UDim2.new(0, 8, 0, 3)
    nameLabel.BackgroundTransparency = 1
    nameLabel.Text = targetPlayer.Name
    nameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    nameLabel.TextSize = 12
    nameLabel.Font = Enum.Font.GothamBold
    nameLabel.TextXAlignment = Enum.TextXAlignment.Left
    nameLabel.TextTruncate = Enum.TextTruncate.AtEnd
    nameLabel.Parent = entry
    
    -- User ID
    local idLabel = Instance.new("TextLabel")
    idLabel.Size = UDim2.new(1, -50, 0, 14)
    idLabel.Position = UDim2.new(0, 8, 0, 27)
    idLabel.BackgroundTransparency = 1
    idLabel.Text = "ID: " .. targetPlayer.UserId
    idLabel.TextColor3 = Color3.fromRGB(140, 140, 160)
    idLabel.TextSize = 10
    idLabel.Font = Enum.Font.Gotham
    idLabel.TextXAlignment = Enum.TextXAlignment.Left
    idLabel.Parent = entry
    
    -- Copy Button
    local copyBtn = Instance.new("TextButton")
    copyBtn.Size = UDim2.new(0, 38, 0, 40)
    copyBtn.Position = UDim2.new(1, -43, 0.5, -20)
    copyBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 200)
    copyBtn.BorderSizePixel = 0
    copyBtn.Text = "üìã"
    copyBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    copyBtn.TextSize = 14
    copyBtn.Font = Enum.Font.GothamBold
    copyBtn.AutoButtonColor = false
    copyBtn.Parent = entry
    
    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 6)
    btnCorner.Parent = copyBtn
    
    -- Copy Button Click
    copyBtn.MouseButton1Click:Connect(function()
        if copyToClipboard(tostring(targetPlayer.UserId)) then
            copyBtn.BackgroundColor3 = Color3.fromRGB(50, 200, 50)
            copyBtn.Text = "‚úì"
            wait(0.5)
            copyBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 200)
            copyBtn.Text = "üìã"
        else
            copyBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
            copyBtn.Text = "‚úó"
            wait(0.5)
            copyBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 200)
            copyBtn.Text = "üìã"
        end
    end)
    
    -- Hover effects
    copyBtn.MouseEnter:Connect(function()
        TweenService:Create(copyBtn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(80, 80, 220)}):Play()
    end)
    
    copyBtn.MouseLeave:Connect(function()
        TweenService:Create(copyBtn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(60, 60, 200)}):Play()
    end)
    
    entry.MouseEnter:Connect(function()
        TweenService:Create(entry, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(35, 35, 45)}):Play()
    end)
    
    entry.MouseLeave:Connect(function()
        TweenService:Create(entry, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(28, 28, 35)}):Play()
    end)
    
    entry.Parent = scrollFrame
    return entry
end

-- Create Join Notification
local function createJoinNotification(targetPlayer)
    local notif = Instance.new("Frame")
    notif.Name = "Notification_" .. targetPlayer.UserId
    notif.Size = UDim2.new(1, 0, 0, 75)
    notif.BackgroundColor3 = Color3.fromRGB(22, 22, 28)
    notif.BorderSizePixel = 0
    notif.ClipsDescendants = true
    
    local notifCorner = Instance.new("UICorner")
    notifCorner.CornerRadius = UDim.new(0, 10)
    notifCorner.Parent = notif
    
    local notifStroke = Instance.new("UIStroke")
    notifStroke.Color = Color3.fromRGB(100, 255, 100)
    notifStroke.Thickness = 1.5
    notifStroke.Transparency = 0.3
    notifStroke.Parent = notif
    
    -- Accent bar
    local accentBar = Instance.new("Frame")
    accentBar.Size = UDim2.new(0, 4, 1, 0)
    accentBar.BackgroundColor3 = Color3.fromRGB(100, 255, 100)
    accentBar.BorderSizePixel = 0
    accentBar.Parent = notif
    
    -- Title
    local notifTitle = Instance.new("TextLabel")
    notifTitle.Size = UDim2.new(1, -15, 0, 22)
    notifTitle.Position = UDim2.new(0, 12, 0, 5)
    notifTitle.BackgroundTransparency = 1
    notifTitle.Text = "‚ú® Player Joined"
    notifTitle.TextColor3 = Color3.fromRGB(100, 255, 100)
    notifTitle.TextSize = 13
    notifTitle.Font = Enum.Font.GothamBold
    notifTitle.TextXAlignment = Enum.TextXAlignment.Left
    notifTitle.Parent = notif
    
    -- Player name
    local notifName = Instance.new("TextLabel")
    notifName.Size = UDim2.new(1, -15, 0, 22)
    notifName.Position = UDim2.new(0, 12, 0, 25)
    notifName.BackgroundTransparency = 1
    notifName.Text = targetPlayer.Name
    notifName.TextColor3 = Color3.fromRGB(255, 255, 255)
    notifName.TextSize = 15
    notifName.Font = Enum.Font.GothamBold
    notifName.TextXAlignment = Enum.TextXAlignment.Left
    notifName.TextTruncate = Enum.TextTruncate.AtEnd
    notifName.Parent = notif
    
    -- User ID
    local notifId = Instance.new("TextLabel")
    notifId.Size = UDim2.new(1, -15, 0, 16)
    notifId.Position = UDim2.new(0, 12, 0, 47)
    notifId.BackgroundTransparency = 1
    notifId.Text = "ID: " .. targetPlayer.UserId
    notifId.TextColor3 = Color3.fromRGB(150, 150, 170)
    notifId.TextSize = 11
    notifId.Font = Enum.Font.Gotham
    notifId.TextXAlignment = Enum.TextXAlignment.Left
    notifId.Parent = notif
    
    -- Countdown bar background
    local countdownBg = Instance.new("Frame")
    countdownBg.Size = UDim2.new(1, 0, 0, 3)
    countdownBg.Position = UDim2.new(0, 0, 1, -3)
    countdownBg.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
    countdownBg.BorderSizePixel = 0
    countdownBg.Parent = notif
    
    -- Countdown bar (shrinks over time)
    local countdownBar = Instance.new("Frame")
    countdownBar.Size = UDim2.new(1, 0, 1, 0)
    countdownBar.BackgroundColor3 = Color3.fromRGB(100, 255, 100)
    countdownBar.BorderSizePixel = 0
    countdownBar.Parent = countdownBg
    
    notif.Parent = notifContainer
    
    -- Slide in animation
    notif.Size = UDim2.new(1, 0, 0, 0)
    local slideIn = TweenService:Create(
        notif,
        TweenInfo.new(0.4, Enum.EasingStyle.Back, Enum.EasingDirection.Out),
        {Size = UDim2.new(1, 0, 0, 75)}
    )
    slideIn:Play()
    
    -- Countdown animation (5 seconds)
    task.wait(0.4)
    local countdownTween = TweenService:Create(
        countdownBar,
        TweenInfo.new(5, Enum.EasingStyle.Linear),
        {Size = UDim2.new(0, 0, 1, 0)}
    )
    countdownTween:Play()
    
    -- Remove after countdown
    task.wait(5)
    local fadeOut = TweenService:Create(
        notif,
        TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.In),
        {Size = UDim2.new(1, 0, 0, 0)}
    )
    fadeOut:Play()
    fadeOut.Completed:Wait()
    notif:Destroy()
end

-- Update player count
local function updatePlayerCount()
    playerCount.Text = "Players: " .. #Players:GetPlayers()
end

-- Submit Vote Function
local function submitVote(voteType)
    local playerId = tonumber(idInput.Text)
    
    if not playerId then
        statusLabel.Text = "‚ùå Invalid Player ID!"
        statusLabel.TextColor3 = Color3.fromRGB(220, 70, 70)
        return
    end
    
    statusLabel.Text = "‚è≥ Submitting vote..."
    statusLabel.TextColor3 = Color3.fromRGB(255, 200, 0)
    
    local success, result = pcall(function()
        local args = {playerId, voteType}
        return ReplicatedStorage:WaitForChild("ReputationRemotes"):WaitForChild("SubmitVote"):InvokeServer(unpack(args))
    end)
    
    if success then
        statusLabel.Text = "‚úÖ Vote submitted successfully!"
        statusLabel.TextColor3 = Color3.fromRGB(70, 180, 100)
    else
        statusLabel.Text = "‚ùå Vote failed: " .. tostring(result)
        statusLabel.TextColor3 = Color3.fromRGB(220, 70, 70)
    end
    
    task.wait(3)
    statusLabel.Text = ""
end

-- Toggle UI
local guiVisible = false
local function toggleUI()
    guiVisible = not guiVisible
    
    if guiVisible then
        mainFrame.Visible = true
        mainFrame.Size = UDim2.new(0, 700, 0, 0)
        
        TweenService:Create(mainFrame, TweenInfo.new(0.4, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
            Size = UDim2.new(0, 700, 0, 400)
        }):Play()
        
        TweenService:Create(toggleButton, TweenInfo.new(0.3), {Rotation = 45}):Play()
    else
        TweenService:Create(mainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.In), {
            Size = UDim2.new(0, 700, 0, 0)
        }):Play()
        
        TweenService:Create(toggleButton, TweenInfo.new(0.3), {Rotation = 0}):Play()
        
        task.wait(0.3)
        mainFrame.Visible = false
    end
end

-- ========================================
-- EVENT CONNECTIONS
-- ========================================

toggleButton.MouseButton1Click:Connect(toggleUI)
closeButton.MouseButton1Click:Connect(toggleUI)

-- Button hover effects
likeButton.MouseEnter:Connect(function()
    TweenService:Create(likeButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(80, 200, 120)}):Play()
end)
likeButton.MouseLeave:Connect(function()
    TweenService:Create(likeButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(70, 180, 100)}):Play()
end)

dislikeButton.MouseEnter:Connect(function()
    TweenService:Create(dislikeButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(240, 90, 90)}):Play()
end)
dislikeButton.MouseLeave:Connect(function()
    TweenService:Create(dislikeButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(220, 70, 70)}):Play()
end)

-- Button clicks
likeButton.MouseButton1Click:Connect(function()
    submitVote("Like")
end)

dislikeButton.MouseButton1Click:Connect(function()
    submitVote("Dislike")
end)

-- Only numbers in input
idInput:GetPropertyChangedSignal("Text"):Connect(function()
    idInput.Text = string.gsub(idInput.Text, "[^%d]", "")
end)

-- Initialize players
for _, targetPlayer in ipairs(Players:GetPlayers()) do
    createPlayerEntry(targetPlayer)
end
updatePlayerCount()

-- Player events
Players.PlayerAdded:Connect(function(targetPlayer)
    createPlayerEntry(targetPlayer)
    createJoinNotification(targetPlayer)
    updatePlayerCount()
end)

Players.PlayerRemoving:Connect(function(targetPlayer)
    local entry = scrollFrame:FindFirstChild(targetPlayer.Name)
    if entry then
        TweenService:Create(entry, TweenInfo.new(0.2), {
            Size = UDim2.new(1, -5, 0, 0),
            BackgroundTransparency = 1
        }):Play()
        task.wait(0.2)
        entry:Destroy()
    end
    updatePlayerCount()
end)
